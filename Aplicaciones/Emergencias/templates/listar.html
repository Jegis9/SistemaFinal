{% extends "baseG.html" %} {% load static %} {% block body %}
<div class="container mt-5">
  <h2 class="mb-4">Lista de categorias</h2>

  <a href="{% url 'add' %}" class="btn btn-primary">Volver</a>
  <a href="{% url 'crear_categoria' %}" class="btn btn-success"
    >Crear categoria</a
  >
  <table id="myTable" class="table table-striped table-bordered border-success">
    <thead class="table-dark">
      <tr>
        <th class="header-cell w-5">#</th>

        <th class="header-cell w-5">Nombre</th>

        <th class="header-cell w-5">Acciones</th>
      </tr>
    </thead>
    <tbody>
      {% for categoria in categorias %}
      <tr>
        <td>{{ categoria.id }}</td>

        <td>{{ categoria.nombre }}</td>

        <td>
          <!-- Botón para Editar -->
          <a
            href="{% url 'editar_categoria' categoria.id %}"
            class="btn btn-primary btn-sm"
          >
            <i class="bi bi-pencil-square"></i>
          </a>
        </td>
      </tr>

      {% endfor %}
    </tbody>
  </table>
</div>
<script>
  function confirmDelete(codigo_her) {
    // Usamos SweetAlert para mostrar una alerta personalizada
    Swal.fire({
      title: "¿Estás seguro?",
      text: "No podrás revertir esta acción",
      icon: "warning",
      showCancelButton: true,
      confirmButtonColor: "#d33",
      cancelButtonColor: "#3085d6",
      confirmButtonText: "Sí, eliminarlo",
      cancelButtonText: "Cancelar",
    }).then((result) => {
      if (result.isConfirmed) {
        // Si el usuario confirma, enviamos el formulario específico por su ID
        document.getElementById(`deleteForm-${codigo_her}`).submit();
      }
    });
  }
</script>
{% endblock %}
